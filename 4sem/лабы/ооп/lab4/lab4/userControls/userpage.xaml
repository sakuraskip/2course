<Window x:Class="lab4.userControls.userpage"
          xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:local="clr-namespace:lab4.userControls"
        xmlns:vm="clr-namespace:lab4.ViewModels"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
        mc:Ignorable="d"
         Background="{DynamicResource BackgroundColor}"
        Title="userpage" Height="600" Width="900">
    <Window.DataContext>
        <vm:UserPageViewModel/>
    </Window.DataContext>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0.3*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <StackPanel   Margin="20" Grid.Row="0" Grid.RowSpan="2">
            <Image Source="{Binding OurUser.ProfilePicturePath}" x:Name="profileImage" Width="100" Height="100" Margin="0,10,0,10" />
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="0.1*"/>
                </Grid.ColumnDefinitions>
                <TextBlock x:Name="usernameTextBlock" HorizontalAlignment="Center" Text="{Binding OurUser.Username}" FontSize="14" FontWeight="Bold" Margin="0,0,0,30" />
                <Button HorizontalAlignment="Left" VerticalAlignment="Top" Grid.Column="1" Height="15" Width="15" Margin="0,3,0,0" Command="{Binding EditProfileCommand}">
                    <Button.Background>
                        <ImageBrush ImageSource="C:\Users\леха\Desktop\2 курс\4sem\лабы\ооп\lab4\lab4\Resources\editIcon.jpg" TileMode="None"/>
                    </Button.Background>
                </Button>
            </Grid>
          
         
        </StackPanel>
        <Button Command="{Binding BackToCatalogCommand}" Content="{DynamicResource BackToCatalogButton}" Grid.Row="1" Height="30" Margin="20" VerticalAlignment="Top"></Button>
        <StackPanel Grid.Row="1"  Margin="20"  VerticalAlignment="Bottom">
            <Button Content="{DynamicResource ChangeLanguage}" Height="30" Margin="0,0,0,20" Command="{Binding  ChangeLanguageCommand}"/>
            <Button Content="{DynamicResource ChangeThemeButton}" Height="30" Margin="0,0,0,10" Command="{Binding  ChangeThemeCommand}"/>
        </StackPanel>
        <ScrollViewer Grid.RowSpan="2" Grid.Column="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <ItemsControl ItemsSource="{Binding Rentals}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Margin="10" Width="300" Height="300">
                                <StackPanel Margin="10">
                                    <TextBlock FontWeight="Bold" FontSize="18" Text="{Binding shipName}" HorizontalAlignment="Center" />
                                    <Image Source="{Binding imagePath}" Width="240" Height="160" Stretch="UniformToFill" Margin="0,0,0,3" />
                                    <TextBlock VerticalAlignment="Center" FontSize="16" Text="{Binding Date}" />
                                    <TextBlock VerticalAlignment="Center" FontSize="16" Text="{Binding Status}" />
                                    <TextBlock VerticalAlignment="Center" FontSize="16" Text="{Binding priceString}" />
                                    <Button Command="{Binding DataContext.CancelRentCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}" IsEnabled="{Binding CanBeCancelled}" Content="{DynamicResource CancelButton}" Width="80" Height="30" />
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>
